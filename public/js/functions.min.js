function resetAll(){$("#success").addClass("hide"),$("#error").addClass("hide"),$("#alert").addClass("hide")}function copyToClipboard(e){var t,n,o="INPUT"===e.tagName||"TEXTAREA"===e.tagName;if(o)s=e,t=e.selectionStart,n=e.selectionEnd;else{if(!(s=document.getElementById("_hiddenCopyText_"))){var s=document.createElement("textarea");s.style.position="absolute",s.style.left="-9999px",s.style.top="0",s.id="_hiddenCopyText_",document.body.appendChild(s)}s.textContent=e.textContent}var a,l=document.activeElement;s.focus(),s.setSelectionRange(0,s.value.length);try{a=document.execCommand("copy")}catch(e){a=!1}return l&&"function"==typeof l.focus&&l.focus(),o?e.setSelectionRange(t,n):s.textContent="",a}$(document).ready(function(){$("#submit").click(function(){$("form").submit()}),$("form").submit(function(e){e.preventDefault(),resetAll();var t=$("#url").val();t&&!t.match(/^http([s]?):\/\/.*/)&&(t=encodeURIComponent("http://"+t));var n=new RegExp("^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|(www\\.)?){1}([0-9A-Za-z-\\.@:%_‌​+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?");t.length<5||!n.test(t)?$("#error").html("Please insert a valid URL").removeClass("hide"):($("#loading").removeClass("hide"),$.post("/generate",{url:t},function(e){$("#loading").addClass("hide"),void 0!==e.result&&"success"==e.result?($("#inputResult").val(e.url),$("#success").val(e.url).removeClass("hide")):void 0!==e.message?$("#error").html(e.message).removeClass("hide"):$("#error").html("There was an error. Try again.").removeClass("hide")}))}),$("#inputResult").click(function(){this.select(),copyToClipboard(document.getElementById("inputResult"));let e=$(".alert");e.fadeIn(function(){setTimeout(function(){e.fadeOut("slow")},700)})}),$("#notFound")&&setTimeout(function(){$("#notFound").fadeOut("slow")},5e3)});
